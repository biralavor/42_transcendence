<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <title>ft_transcendence pong page</title>
    <style>
      main {
	  height: 100vh;
      }
      .canvasContainer {
	  display: flex;
	  align-items: center;
	  justify-items: center;
      }
      canvas {
	  border: solid white;
	  margin: auto
      }
      </style>
</head>
<body>
  <main class='canvasContainer'>
    <canvas id='pongCanvas' width=800 height=400>
      <!-- children of canvas tag only renders if browser
	   does not support canvas elements as fallback for that case
	   this happens for example on text only browsers like
	   lynx and eww since they do not support graphics in general
	-->
      <p> :( </p>
      <p>
	Our pong game depends on browser support for canvas elements.
      </p>
      <p>
	If you are seeing this then it is likely that your browser does not support canvas element.
	This makes playing our pong game in this browser impossible
      </p>
    </canvas>
  </main>
  <script>
    // TODO set width and height of canvas
    // based on biggest possible preserving
    // desired aspect ratio. maybe a css only solution
    // is possible for this, otherwise
    // a js solution is possible

    /**
     * For string based color follow reference
     * https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Values/color_value
     * @typedef {string} Color
     */
    
    /**
     * @class
     */
    class Position {
        /**
         * Create a Position.
         * @param {number} x - The initial horizontal position.
         * @param {number} y - The initial vertical position.
        */
        constructor(x, y) {
            /** @type {number} - horizontal position  */
	    this.x = x;
            /** @type {number} - vertical position*/
            this.y = y;
            /** @type {number} - horizontal velocity*/
	    this.velX = 0;
            /** @type {number} - vertical velocity */
	    this.velY = 0;
	}
    }

    /**
     * @class
     */
    class Size {
        /**
         * Create a Size.
         * @param {number} width - The width of the Size.
         * @param {number} height - The height of the Size.
         */
        constructor(width, height) {
	    /** @type {number} - width size  */
            this.width = width;
	    /** @type {number} - height size  */
            this.height = height;
        }
    }

    class Entity {
	/** @type {Position} - entity position */
	position;
	/** @type {Size} - entity size */
	size;
	/** @type {Color} - color values  */
	color;
    }

    class Player extends Entity {

	/**
	 * Enum for Player types.
	 * @readonly
	 * @enum {(1|2)}
	 */
	static Type = Object.freeze({
	    ONE: 1,
	    TWO: 2
	});

	/**
	 * Create a Player.
	 * @param {Type} type - The Player type (Player.Type.ONE or Player.Type.TWO)
	 */
	constructor(type) {
	    super();
	    /** @type {Type} - The Player type  */
            this.type = type;
            if (type === Player.Type.ONE) {
		/** @type {Position} - position values  */
                this.position = new Position(10, 180);
		this.color = 'red';
	    } else {
                this.position = new Position(760, 180);
		this.color = 'blue';
	    }
	    /** @type {Size} - size values  */
	    this.size = new Size(30, 90);
	}
    }

    class Ball extends Entity {

	/**
	 * Create a Ball.
	 */
	constructor() {
	    super();
            this.color = 'white';
	    this.position = new Position(300, 180);
	    this.size = new Size(30, 30);
	}
    }

    // elements with id set on html automatically have
    // a js variable referencing that id with that element
    // but this do not work if element id is not a proper js identifier
    // like using kebab cased ids for example "pong-canvas"
    const canvasContext = pongCanvas.getContext("2d");
    canvasContext.reset();
    const player1 = new Player(Player.Type.ONE);
    const player2 = new Player(Player.Type.TWO);
    const ball = new Ball();

    canvasContext.fillStyle = player1.color;
    canvasContext.fillRect(
	player1.position.x,
	player1.position.y,
	player1.size.width,
	player1.size.height
    );

    canvasContext.fillStyle = player2.color;
    canvasContext.fillRect(
	player2.position.x,
	player2.position.y,
	player2.size.width,
	player2.size.height
    );

    canvasContext.fillStyle = ball.color;
    canvasContext.fillRect(
	ball.position.x,
	ball.position.y,
	ball.size.width,
	ball.size.height
    )
    
  </script>
</body>
</html>
